
    <html>
    <head>
        <meta charset="utf-8">
        <style>
            body { font-family: 'Segoe UI', sans-serif; padding: 2em; line-height: 1.6; }
            h1, h2, h3 { color: #222; }
            code { background-color: #f4f4f4; padding: 2px 4px; border-radius: 4px; }
            pre { background: #f0f0f0; padding: 10px; overflow-x: auto; }
            table { border-collapse: collapse; width: 100%; margin: 20px 0; }
            th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
            a { color: #0366d6; text-decoration: none; }
        </style>
        <title>Writeup</title>
    </head>
    <body>
        <p><a href="http://localhost:8000/html/" style="text-decoration: none;">← Back</a></p>
<h1>Interrupt Handling and Context Switching in Kernel</h1>
<p>Efficient multitasking and hardware responsiveness in modern operating systems are enabled by two key mechanisms in the kernel: <strong>interrupt handling</strong> and <strong>context switching</strong>. These are fundamental to how the kernel orchestrates processes, handles external events, and maintains CPU utilization.</p>
<h2>2. Interrupt Handling in the Kernel</h2>
<p>When an interrupt occurs:</p>
<ol>
<li>
<p><strong>Interrupt Context</strong>:</p>
</li>
<li>
<p>The kernel enters a special context where regular process scheduling is suspended.</p>
</li>
<li>
<p>It saves the state of the current task (registers, stack pointer).</p>
</li>
<li>
<p><strong>Top Half and Bottom Half</strong>:</p>
</li>
<li>
<p><strong>Top Half (ISR):</strong> Runs immediately; does minimal work (acknowledges interrupt).</p>
</li>
<li>
<p><strong>Bottom Half:</strong> Deferred work using mechanisms like:</p>
<ul>
<li>SoftIRQs</li>
<li>Tasklets</li>
<li>Workqueues</li>
</ul>
</li>
</ol>
<p>These bottom halves are scheduled to run later when it is safe to sleep or schedule tasks.</p>
<h2>4. Context Switching and the Scheduler</h2>
<p>The <strong>Linux scheduler</strong> (CFS – Completely Fair Scheduler) decides which task runs next based on priorities and fairness.</p>
<p>Interrupts can:</p>
<ul>
<li><strong>Preempt the current task</strong>, forcing a context switch.</li>
<li><strong>Schedule deferred work</strong>, which may also cause a switch.</li>
</ul>
<h3>Involuntary Switch:</h3>
<p>Triggered by:</p>
<ul>
<li>Timer interrupts (preemption)</li>
<li>I/O wait</li>
<li>Kernel yields</li>
</ul>
<h3>Voluntary Switch:</h3>
<p>Triggered by:</p>
<ul>
<li>Process calling <code>sleep()</code>, <code>wait()</code>, <code>sched_yield()</code>.</li>
</ul>
<h2>Summary</h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Interrupt Handling</th>
<th>Context Switching</th>
</tr>
</thead>
<tbody>
<tr>
<td>Trigger</td>
<td>Asynchronous (HW/SW event)</td>
<td>Scheduler decision or blocking call</td>
</tr>
<tr>
<td>Purpose</td>
<td>Handle external/internal events</td>
<td>Switch execution between tasks</td>
</tr>
<tr>
<td>Context</td>
<td>Runs in interrupt context</td>
<td>Runs in process/thread context</td>
</tr>
<tr>
<td>Latency Critical?</td>
<td>Yes (especially in ISRs)</td>
<td>No (usually)</td>
</tr>
<tr>
<td>Preemptive?</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<hr />
<h2>Conclusion</h2>
<p>Interrupt handling and context switching are core kernel functions that allow responsive, multitasking operating systems. The balance between fast interrupt response and efficient task scheduling is crucial for system performance and reliability.</p>
    </body>
    </html>
    